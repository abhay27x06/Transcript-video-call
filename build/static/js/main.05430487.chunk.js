(this.webpackJsonpserver=this.webpackJsonpserver||[]).push([[0],{101:function(e,t,s){},150:function(e,t){},152:function(e,t){},162:function(e,t,s){},163:function(e,t,s){},164:function(e,t,s){},183:function(e,t,s){},185:function(e,t,s){},186:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),c=s(27),r=s.n(c),o=(s(98),s(6)),i=s(16),l=(s(99),s(1));var d=e=>{let{hostRef:t,style:s,muted:a,id:n}=e;return Object(l.jsx)("video",{ref:t,style:s,muted:a,id:n,autoPlay:!0,playsInline:!0})},m=(s(101),s(4)),u=s(35),j=s.n(u),p=s(36),b=s.n(p),h=s(37),O=s.n(h),g=s(38),x=s.n(g),v=s(74),f=s.n(v),y=s(75),I=s.n(y),N=s.p+"static/media/mountains-home.e567e0a9.png",S=s.p+"static/media/microsoft-teams.daedc043.svg",T=s.p+"static/media/avatar.cad37a31.png",k=s.p+"static/media/home-right-vector.5801bc42.png";const w=(e,t)=>{t(!e)},D=async e=>{let{camera:t,mic:s,hostRef:a,setStream:n,setAudioDevices:c,setVideoDevices:r}=e;return await new Promise(((e,t)=>{navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((t=>{a&&a.current&&(a.current.srcObject=t,e(t))})).catch((e=>{t(e)}))}))};var C=s(8),E=s(189),R=s(3),P=(s(52),s(32)),_=s.n(P),A=s(77),M=s(22),B=s.n(M);var F=Object(C.b)((e=>({email:e.userDetails.email,name:e.userDetails.name,mic:e.userDetails.mic,camera:e.userDetails.camera,stream:e.userDetails.stream,videoDevices:e.userDetails.videoDevices,audioDevices:e.userDetails.audioDevices})),(e=>({setEmail:t=>{e({type:"SET_EMAIL",email:t})},setName:t=>{e({type:"SET_NAME",name:t})},setMic:t=>{e({type:"SET_MIC",mic:t})},setCamera:t=>{e({type:"SET_CAMERA",camera:t})},setStream:t=>{e({type:"SET_STREAM",stream:t})},setVideoDevices:t=>{e({type:"SET_VIDEO_DEVICES",videoDevices:t})},setAudioDevices:t=>{e({type:"SET_AUDIO_DEVICES",audioDevices:t})}})))((e=>{const{mic:t,setMic:s,camera:n,setCamera:c,setStream:r,stream:u,setAudioDevices:p,setVideoDevices:h}=e,g=Object(o.g)(),v=Object(a.useRef)(),y=(Object(a.useRef)(Object(E.a)()),{width:"100%",borderRadius:"27px 27px 0 0",height:"100%",objectFit:"contain",display:n?"block":"none"}),[C,P]=Object(a.useState)(!1),[M,F]=Object(a.useState)(!1),J=e.match.params.teamId;Object(a.useEffect)((()=>{D({camera:n,mic:t,hostRef:v,setStream:r,setAudioDevices:p,setVideoDevices:h}).then((e=>{r(e),R.b.info("Devices are working properly"),F(!0)})).catch((e=>{R.b.error("Devices are not working properly")}))}),[]),Object(a.useEffect)((()=>{u&&(u.getVideoTracks()[0].enabled=n,u.getAudioTracks()[0].enabled=t)}),[t,n]);const U=(e,t)=>{w(e,t)};return Object(l.jsxs)("div",{className:"container",children:[Object(l.jsxs)(_.a,{isOpen:C,onRequestClose:()=>{P(!1)},style:{overlay:{backgroundColor:"rgba(0,0,0,0.7)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"20px"}},id:"modal-home",contentLabel:"Name Modal",children:[Object(l.jsx)("h3",{children:"Get your link"}),Object(l.jsxs)("div",{className:"modal-content-home",children:[Object(l.jsx)(i.b,{to:"/teams/".concat(J),style:{color:"white"},children:window.location.href.split("/")[0]+"//"+window.location.href.split("/")[2]+"/teams/"+J}),Object(l.jsx)(A.CopyToClipboard,{text:window.location.href.split("/")[0]+"//"+window.location.href.split("/")[2]+"/teams/"+J,onCopy:()=>{R.b.dark("Link copied!")},children:Object(l.jsx)(m.Icon,{icon:I.a,id:"copy-to-clipboard-icon"})})]})]}),Object(l.jsxs)("div",{className:"home-side-left",children:[Object(l.jsx)("img",{src:S,className:"logo-home",alt:"Microsoft Teams"}),Object(l.jsxs)("div",{className:"video-box",children:[Object(l.jsx)("div",{className:"video",children:Object(l.jsx)(d,{hostRef:v,style:y,muted:!0})}),n?null:Object(l.jsxs)("div",{className:"video-off-box",children:[Object(l.jsx)(m.Icon,{icon:f.a,className:"video-off"}),Object(l.jsx)("h3",{children:"Camera is Off"})]}),Object(l.jsxs)("div",{className:"footer-options-video",children:[t?Object(l.jsx)(m.Icon,{icon:b.a,className:"video-set-buttons",onClick:()=>{U(t,s)}}):Object(l.jsx)(m.Icon,{icon:j.a,className:"video-set-buttons",onClick:()=>{U(t,s)}}),n?Object(l.jsx)(m.Icon,{icon:O.a,className:"video-set-buttons",onClick:()=>{U(n,c)}}):Object(l.jsx)(m.Icon,{icon:x.a,className:"video-set-buttons",onClick:()=>{U(n,c)}})]})]}),Object(l.jsx)("img",{src:N,className:"mountainBackground",alt:"Mountains"})]}),Object(l.jsxs)("div",{className:"home-side-right",children:[Object(l.jsxs)("div",{className:"entry-box",children:[Object(l.jsx)("img",{src:T,className:"avatar-home",alt:"Avatar"}),Object(l.jsx)("h1",{children:"Join your meeting !"}),M?null:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(B.a,{type:"BallTriangle",color:"#00BFFF",height:30,width:30}),Object(l.jsx)("h6",{children:"Devices are loading ! Please wait"})]}),Object(l.jsxs)("div",{className:"home-entry-options",children:[Object(l.jsx)("button",{className:"home-entry-buttons ".concat(M?"":"home-entry-buttons-disabled"),onClick:()=>{g.push("/teams/".concat(J))},disabled:!M,children:"Join Now"}),Object(l.jsx)("button",{className:"home-entry-buttons",onClick:()=>{P(!0)},children:"Share Link"})]})]}),Object(l.jsx)("img",{src:k,className:"home-bottom-vector"})]}),Object(l.jsx)(R.a,{})]})})),J=s(44),U=s(34),V=s.n(U),z=s(79),L=s.n(z),H=s(80),W=s.n(H),G=s(81),Z=s.n(G),$=s(82),Y=s.n($),q=s(83),K=s.n(q),X=s(84),Q=s.n(X),ee=s(33),te=s.n(ee),se=s(41),ae=s(85),ne=s.n(ae),ce=s(42),re=s.n(ce),oe=(s(162),s(86)),ie=s.n(oe),le=s(9);s(64);var de=e=>{let{chats:t,sendMessage:s,openChat:n,setOpenChat:c}=e;const[r,o]=Object(a.useState)(""),i=Object(a.useRef)(null);Object(a.useEffect)((()=>{d()}));const d=()=>{i.current&&i.current.scrollIntoView({behavior:"smooth"})};return Object(l.jsxs)(le.a,{collapsed:!n,rtl:!0,collapsedWidth:"0px",className:"chat-pro-sidebar",children:[Object(l.jsx)(le.d,{children:Object(l.jsxs)("div",{className:"chat-header",children:[Object(l.jsx)("span",{onClick:()=>{c(!n)},children:Object(l.jsx)(m.Icon,{icon:ie.a})}),Object(l.jsx)("h2",{children:"Chats"})]})}),Object(l.jsxs)(le.b,{className:"chat-pro-sidebar-content",children:[t.map(((e,t)=>Object(l.jsxs)("div",{className:"chat-wrapper ".concat("You"===e.name?"chat-wrapper-user":null),children:[Object(l.jsx)("div",{className:"chat-member-name",children:e.name}),Object(l.jsx)("div",{className:"chat-message",children:e.message})]}))),Object(l.jsx)("div",{ref:i})]}),Object(l.jsxs)(le.c,{className:"chat-pro-sidebar-footer",children:[Object(l.jsx)("input",{type:"text",placeholder:"Type here",className:"chatEntry",onKeyPress:e=>{"Enter"===(e=e||window.event).key&&(s(r),o(""))},onChange:e=>{o(e.target.value)},value:r}),Object(l.jsx)(m.Icon,{icon:re.a,onClick:()=>{s(r),o("")}})]})]})},me=(s(163),s(164),s(87)),ue=s.n(me);var je=e=>{let{transcriptsRef:t,openTranscripts:s,setOpenTranscripts:n}=e;const c=Object(a.useRef)(null);Object(a.useEffect)((()=>{r()}));const r=()=>{c.current&&c.current.scrollIntoView({behavior:"smooth"})};return Object(l.jsxs)(le.a,{collapsed:!s,rtl:!0,collapsedWidth:"0px",className:"transcript-pro-sidebar",children:[Object(l.jsx)(le.d,{children:Object(l.jsxs)("div",{className:"transcript-header",children:[Object(l.jsx)("span",{onClick:()=>{n(!s)},children:Object(l.jsx)(m.Icon,{icon:ue.a})}),Object(l.jsx)("h2",{children:"Transcript"})]})}),Object(l.jsxs)(le.b,{className:"transcript-pro-sidebar-content",children:[t.current.map(((e,t)=>Object(l.jsxs)("div",{className:"transcript-wrapper",children:[Object(l.jsxs)("span",{className:"transcript-member-name",children:[e.name," :"]}),Object(l.jsx)("span",{className:"transcript-message",children:e.message})]}))),Object(l.jsx)("div",{ref:c})]})]})},pe=s(7),be=s(10),he=s.n(be);const Oe=e=>{let{peer:t,style:s,options:n}=e;const c=Object(a.useRef)();var r=t.options?t.options:{video:!1,audio:!1};return n&&(r=n),Object(a.useEffect)((()=>{t.peer.on("stream",(e=>{console.log(e.getTracks()),c&&c.current&&(c.current.srcObject=e),t.stream=e}))}),[]),t.destroyed?null:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"user-video-box",style:{display:r.video?"block":"none"},id:t.peerID+"-video_on",children:[Object(l.jsx)(d,{hostRef:c,muted:!1,style:s}),Object(l.jsx)("div",{className:"member-name",children:t.name})]}),Object(l.jsxs)("div",{className:"camera-off-member",style:{display:r.video?"none":"flex"},id:t.peerID+"-video_off",children:[Object(l.jsx)("div",{className:"member-name-initial",children:t.name.slice(0,1)}),Object(l.jsx)("div",{className:"member-name",children:t.name})]})]})};var ge=Object(C.b)((e=>({email:e.userDetails.email,name:e.userDetails.name,mic:e.userDetails.mic,camera:e.userDetails.camera,stream:e.userDetails.stream,videoDevices:e.userDetails.videoDevices,audioDevices:e.userDetails.audioDevices,socket:e.userDetails.socket,userId:e.userDetails.userId})),(e=>({setUserId:t=>{e({type:"SET_USER_ID",userId:t})},setEmail:t=>{e({type:"SET_EMAIL",email:t})},setSocket:t=>{e({type:"SET_SOCKET",socket:t})},setName:t=>{e({type:"SET_NAME",name:t})},setMic:t=>{e({type:"SET_MIC",mic:t})},setCamera:t=>{e({type:"SET_CAMERA",camera:t})},setStream:t=>{e({type:"SET_STREAM",stream:t})},setVideoDevices:t=>{e({type:"SET_VIDEO_DEVICES",videoDevices:t})},setAudioDevices:t=>{e({type:"SET_AUDIO_DEVICES",audioDevices:t})}})))((e=>{const{camera:t,mic:s,setMic:n,setCamera:c,stream:r,setStream:o,name:i,setName:u,socket:p,setSocket:h,userId:g}=e,v=Object(a.useRef)(),[f,y]=Object(a.useState)([]),[I,N]=Object(a.useState)(),[T,k]=Object(a.useState)(!1),C=Object(a.useRef)(),E=Object(a.useRef)([]),P=Object(a.useRef)([]),_=Object(a.useRef)([]),[A,M]=Object(a.useState)([]),B=Object(a.useRef)(),F=Object(a.useRef)(),U=Object(a.useRef)([]),[z,H]=Object(a.useState)(!1),[G,$]=Object(a.useState)([]),[q,X]=Object(a.useState)([]),[ee,ae]=Object(a.useState)(""),ce=Object(a.useRef)([]),[re,oe]=Object(a.useState)(!1),[ie,le]=Object(a.useState)(!1),[me,ue]=Object(a.useState)({enabled:!1,presenter:null}),be=Object(a.useRef)(!1),[ge,xe]=Object(a.useState)(!1),[ve,fe]=Object(a.useState)({enabled:!1,chunks:[]}),ye=Object(a.useRef)(null),Ie=e.match.params.teamId,Ne={width:"100%",height:"100%",borderRadius:"27px",objectFit:"cover"};Object(a.useEffect)((()=>{Se()}),[]),Object(a.useEffect)((()=>{var e=0;_.current.forEach((t=>{t.peer.on("stream",(s=>{U.current.push({peerID:t.peerID,stream:s}),++e!==_.current.length||be.current||C.current.emit("screen streaming running for new user",{roomID:Ie})}))}))}),[A,_]),Object(a.useEffect)((()=>{I&&(I.video?document.getElementById(I.id+"-video_on")&&document.getElementById(I.id+"-video_off")&&(document.getElementById(I.id+"-video_on").style.display="block",document.getElementById(I.id+"-video_off").style.display="none"):document.getElementById(I.id+"-video_on")&&document.getElementById(I.id+"-video_off")&&(document.getElementById(I.id+"-video_on").style.display="none",document.getElementById(I.id+"-video_off").style.display="flex"))}),[I]),window.onbeforeunload=function(){if(Je(),C.current.emit("disconnectMeet",{name:i,roomID:Ie,userId:g}),Ae(),ye.current)for(var e=0;e<1e3;e++);};const Se=()=>{if(p)C.current=p,Me(),Te();else{var e=J.a.connect("".concat(pe.a));e.on("connect",(()=>{he()({url:"".concat(pe.a,"/updateSocket"),method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("TeamsToken"))},data:{socketId:e.id}}).then((e=>{})),C.current=e,h(e),Me(),Te()}))}},Te=()=>{C.current.on("receivedMessage",(e=>{k(!0),P.current=[...P.current,{name:e.name,message:e.message}];const t=P.current;$(t)}))},ke=()=>{me.enabled?(ue({enabled:!1,presenter:null}),be.current=!1,F.current.srcObject.getAudioTracks()[0]&&F.current.srcObject.getAudioTracks()[0].stop(),F.current.srcObject.getVideoTracks()[0].stop(),C.current.emit("screen stream update",{updateStream:!1,roomID:Ie,name:i})):navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}).then((e=>{ue({enabled:!0,presenter:C.current.id}),be.current=!0,F.current.srcObject=e,C.current.emit("screen stream update",{updateStream:!0,roomID:Ie,name:i}),_.current.forEach((t=>{e.getTracks()[1]?(t.peer.replaceTrack(B.current.getTracks()[1],e.getTracks()[1],B.current),t.peer.replaceTrack(B.current.getTracks()[0],e.getTracks()[0],B.current)):e.getTracks()[0]&&t.peer.replaceTrack(B.current.getTracks()[1],e.getTracks()[0],B.current)})),e.getVideoTracks()[0].onended=function(){Je(),ue({enabled:!1,presenter:null}),be.current=!1,e.getAudioTracks()[0]&&e.getAudioTracks()[0].stop(),C.current.emit("screen stream update",{updateStream:!1,roomID:Ie,name:i})}})).catch((e=>{R.b.error("Your device doesn't support screen share",{position:"top-left",hideProgressBar:!0,autoClose:1500})}))},we=e=>{F.current.srcObject.getAudioTracks()[0]?(e.replaceTrack(B.current.getTracks()[1],F.current.srcObject.getTracks()[1],B.current),e.replaceTrack(B.current.getTracks()[0],F.current.srcObject.getTracks()[0],B.current)):e.replaceTrack(B.current.getTracks()[1],F.current.srcObject.getTracks()[0],B.current)};var De,Ce,Ee=null;const Re=Object(a.useRef)(),Pe=e=>{oe(!0),he()({url:"".concat(pe.a,"/transcriptToken"),method:"GET"}).then((t=>{R.b.dark("Transcript is loading",{hideProgressBar:!0,autoClose:1500,position:"top-left"}),Ee=t.data.accessToken,De=btoa(Ie),Ce="wss://api.symbl.ai/v1/realtime/insights/".concat(De,"?access_token=").concat(Ee),Re.current=new WebSocket(Ce),_e({stream:e,roomID:Ie,socketRef:C,name:i})}))},_e=e=>{let{stream:t,roomID:s,socketRef:a,name:n}=e;Re.current.onmessage=e=>{const t=JSON.parse(e.data);if("message"===t.type&&t.message.hasOwnProperty("data")&&console.log("conversationId",t.message.data.conversationId),"message_response"===t.type){for(let e of t.messages)e.payload.content,ce.current=[...ce.current,{name:e.from.userId==g?"You":e.from.name,message:e.payload.content}],X(ce.current);ae("")}if("topic_response"===t.type)for(let s of t.topics);if("insight_response"===t.type)for(let s of t.insights);"message"===t.type&&t.message.hasOwnProperty("punctuated")&&ae((t.message.user.userId==g?"You":t.message.user.name)+": "+t.message.punctuated.transcript),console.log("Response type: ".concat(t.type,". Object: "),t)},Re.current.onerror=e=>{R.b.error("Facing issue with transcript"),console.error(e)},Re.current.onclose=e=>{console.info("Connection to websocket closed")},Re.current.onopen=e=>{R.b.dark("Transcript is ON",{hideProgressBar:!0,position:"top-left",autoClose:1500}),Re.current.send(JSON.stringify({type:"start_request",meetingTitle:"Websockets How-to",insightTypes:["question","action_item"],config:{confidenceThreshold:.5,languageCode:"en-US",speechRecognition:{encoding:"LINEAR16",sampleRateHertz:44100}},speaker:{userId:g,name:n}}))};(e=>{const t=new(0,window.AudioContext),s=t.createMediaStreamSource(e),a=t.createScriptProcessor(1024,1,1),n=t.createGain();s.connect(n),n.connect(a),a.connect(t.destination),a.onaudioprocess=e=>{const t=e.inputBuffer.getChannelData(0)||new Float32Array((void 0).bufferSize),s=new Int16Array(t.length);for(let a=t.length;a>0;a--)s[a]=32767*Math.min(1,t[a]);Re.current.readyState===WebSocket.OPEN&&Re.current.send(s.buffer)}})(t)},Ae=()=>{Re.current&&(ae(""),Re.current.send(JSON.stringify({type:"stop_request"})),oe(!1),R.b.dark("Transcript stopped !",{hideProgressBar:!0,position:"top-left",autoClose:1500}))};function Me(){D({camera:t,mic:s,hostRef:v,setStream:o}).then((e=>{o(e),v.current.srcObject=e,B.current=e.clone(),B.current.getTracks().forEach((function(e){"audio"===e.kind&&(e.enabled=!1),"video"===e.kind&&(e.enabled=!1)})),v.current.srcObject.getTracks().forEach((function(e){"audio"===e.kind&&(e.enabled=s),"video"===e.kind&&(e.enabled=t)}));var a={audio:s,video:t};C.current.emit("join room",{roomID:Ie,options:a,name:i,userId:g}),C.current.on("transcript updated",(e=>{e.enabled?(R.b.dark("Transcript enabled by ".concat(e.name),{position:"top-left",hideProgressBar:!0}),Pe(v.current.srcObject)):(R.b.dark("Transcript disabled by ".concat(e.name),{position:"top-left",hideProgressBar:!0}),Ae())})),C.current.on("all users",(t=>{const s=[];t.forEach((t=>{const n=function(e,t,s,a,n){const c=new V.a({initiator:!0,trickle:!1,stream:s});return c.on("signal",(s=>{C.current.emit("sending signal",{userToSignal:e,callerID:t,signal:s,options:a,name:n})})),c}(t.id,C.current.id,e,a,i);E.current.push({peerID:t.id,peer:n,options:t.options,name:t.name,new:!0,destroyed:!1}),s.push({peerID:t.id,peer:n,options:t.options,name:t.name}),R.b.dark("".concat(t.name," is already present"),{position:"top-left",hideProgressBar:!0,autoClose:1500})})),y(s);const n=[];t.forEach((e=>{const t=function(e,t,s){const a=new V.a({initiator:!0,trickle:!1,stream:s});return a.on("signal",(s=>{C.current.emit("sending screen stream",{userToSignal:e,callerID:t,signal:s})})),a}(e.id,C.current.id,B.current);_.current.push({peerID:e.id+"-screen-share",peer:t,options:e.options,name:e.name}),n.push({peerID:e.id+"-screen-share",peer:t,options:e.options,name:e.name})})),M(n)})),C.current.on("user joined",(t=>{const s=function(e,t,s,a){const n=new V.a({initiator:!1,trickle:!1,stream:s});return n.on("signal",(e=>{C.current.emit("returning signal",{signal:e,callerID:t,options:a,name:i})})),n.signal(e),n}(t.signal,t.callerID,e,t.options,t.name);E.current.push({peerID:t.callerID,peer:s,options:t.options,name:t.name,new:!0,destroyed:!1});const a=E.current.filter((e=>e.peerID!==t.callerID));a.push({peerID:t.callerID,peer:s,options:t.options,name:t.name}),y(a),R.b.dark("".concat(t.name," has joined"),{position:"top-left",hideProgressBar:!0,autoClose:1500})})),C.current.on("user left",(e=>{let{id:t,name:s}=e;E.current.filter((e=>{e.peerID===t&&(e.destroyed=!0,e.peer.destroy(),void 0===s&&R.b.dark("".concat(e.name," has left"),{position:"top-left",hideProgressBar:!0,autoClose:1500}))})),void 0!==s&&R.b.dark("".concat(s," has left"),{position:"top-left",hideProgressBar:!0,autoClose:1500})})),C.current.on("receiving returned signal",(e=>{E.current.find((t=>t.peerID===e.id)).peer.signal(e.signal)})),C.current.on("change",(e=>{N({id:e.id,video:e.video,audio:e.audio})})),C.current.on("user added screen stream",(e=>{const t=function(e,t,s){const a=new V.a({initiator:!1,trickle:!1,stream:s});return a.on("signal",(e=>{C.current.emit("returning screen stream",{signal:e,callerID:t})})),a.signal(e),a}(e.signal,e.callerID,B.current);_.current.push({peerID:e.callerID+"-screen-share",peer:t});const s=_.current.filter((t=>t.peerID!==e.callerID+"-screen-share"));s.push({peerID:e.callerID+"-screen-share",peer:t}),M(s),be.current&&we(t)})),C.current.on("user left screen stream",(e=>{const t=_.current.findIndex((t=>t.peerID===e));-1!==t&&_.current[t]&&_.current[t].peer.destroy();const s=_.current.filter((t=>t.peerID!==e));_.current=s,M(s)})),C.current.on("receiving returned screen stream",(e=>{_.current.find((t=>t.peerID===e.id)).peer.signal(e.signal)})),C.current.on("screen share update",(e=>{if(e.updateStream){ue({enabled:!0,presenter:e.id}),be.current=!0;const t=U.current.find((t=>t.peerID===e.id+"-screen-share"));F.current.srcObject=t.stream,R.b.dark("".concat(e.name," started screen sharing"),{position:"top-left",hideProgressBar:!0,autoClose:1500})}else ue({enabled:!1,presenter:null}),be.current=!1,R.b.dark("".concat(e.name," stopped screen sharing"),{position:"top-left",hideProgressBar:!1,autoClose:1500})}))})).catch((e=>{R.b.error("Devices not working properly",{position:"top-left",hideProgressBar:!0,autoClose:1500}),console.error(e)}))}const Be=(e,a,n)=>{v.current.srcObject&&v.current&&v&&v.current.srcObject.getTracks().forEach((function(c){c.kind===e&&(C.current.emit("change",{id:C.current.id,video:"video"===e?!t:t,audio:"audio"===e?!s:s,roomID:Ie}),c.enabled="audio"===e?!s:!t),w(a,n)}))},Fe=()=>{var e=new Blob(ve.chunks,{type:"video/webm"}),t=URL.createObjectURL(e),s=document.createElement("a");document.body.appendChild(s),s.style="display: none",s.href=t,s.download="Recording-".concat(new Date,".webm"),s.click(),window.URL.revokeObjectURL(t),fe({enabled:!1,chunks:[]}),R.b.info("Screen Recording Stopped",{position:"top-left",hideProgressBar:!0,autoClose:1500}),ye.current=null},Je=()=>{ye.current&&ye.current.stop()};return Object(l.jsxs)("div",{className:"meet-parent",children:[Object(l.jsx)(je,{transcripts:q,openTranscripts:ie,setOpenTranscripts:le,transcriptsRef:ce}),Object(l.jsxs)("div",{className:"meet-outer-layout",children:[Object(l.jsxs)("div",{className:"meet-icons",children:[Object(l.jsx)("img",{src:S,className:"meet-teams-logo"}),Object(l.jsxs)("div",{className:"meet-top-option-box",children:[Object(l.jsxs)("div",{className:"other-options",children:[Object(l.jsx)(m.Icon,{icon:K.a,style:{color:"#10a19f"}}),Object(l.jsxs)("ul",{className:"dropdown-meet",children:[Object(l.jsxs)("li",{children:["Change Wallpaper",Object(l.jsx)(te.a,{className:"background-switcher",uncheckedIcon:!1,checkedIcon:!1,onChange:e=>{xe(e),document.getElementsByClassName("meet-outer-layout")[0].style.backgroundImage=e?'url("https://picsum.photos/1920/1080")':null},checked:ge})]}),Object(l.jsxs)("li",{onClick:()=>{if(me.enabled&&me.presenter!==C.current.id)return R.b.dark("Only presenter can record screen",{position:"top-left",hideProgressBar:!0,autoClose:1500});me.enabled&&ve.enabled?Je():me.enabled&&!ve.enabled?(()=>{var e=document.getElementsByTagName("video");const t=new AudioContext;var s=t.createMediaStreamDestination();for(let n in Array.from(e))"user-own-video"!==e[n].id?0!=e[n].srcObject.getAudioTracks().length&&t.createMediaStreamSource(e[n].srcObject).connect(s):0!=v.current.srcObject.getAudioTracks().length&&t.createMediaStreamSource(v.current.srcObject).connect(s);var a=new MediaStream([s.stream.getAudioTracks()[0],F.current.srcObject.getVideoTracks()[0]]);fe({enabled:!0,chunks:[...ve.chunks]}),R.b.info("Screen Recording Started",{position:"top-left",hideProgressBar:!0,autoClose:1500}),ye.current=new MediaRecorder(a,{mimeType:"video/webm;codecs=vp8,opus"}),ye.current.ondataavailable=function(e){e.data.size>0&&(ve.chunks.push(e.data),fe({enabled:ve.enabled,chunks:[...ve.chunks]}),Fe())},ye.current.start()})():R.b.dark("Start Screen Sharing before Recording",{position:"top-left",hideProgressBar:!0,autoClose:1500})},children:[me.enabled&&ve.enabled?"Stop Screen Recording":"Start Screen Recording",Object(l.jsx)(m.Icon,{icon:Q.a,style:{color:"#eb4a4a"}})]}),Object(l.jsxs)("li",{children:[Object(l.jsxs)("span",{children:[re?"Disable":"Enable",Object(l.jsx)("br",{})," Transcript"]}),Object(l.jsx)(te.a,{className:"background-switcher",uncheckedIcon:!1,checkedIcon:!1,onChange:()=>{re?(C.current.emit("transcript enabled",{userId:g,name:i,roomID:Ie,enabled:!1}),Ae()):(C.current.emit("transcript enabled",{userId:g,name:i,roomID:Ie,enabled:!0}),Pe(v.current.srcObject))},checked:re})]})]})]}),Object(l.jsx)(m.Icon,{icon:ne.a,"data-tip":"Transcript Panel",className:"chat-opener",onClick:()=>{le(!ie)}}),me.enabled?Object(l.jsx)(m.Icon,{icon:Y.a,"data-tip":C.current&&me.presenter===C.current.id?"Stop Screen Share":"Only presenter can stop screen sharing",onClick:C.current&&me.presenter===C.current.id?ke:null,className:"screen-share ".concat(C.current&&me.presenter!==C.current.id?"screen-share-disabled":null),style:{color:"#ff0000"}}):Object(l.jsx)(m.Icon,{icon:Z.a,onClick:ke,"data-tip":"Share Screen",className:"screen-share"}),Object(l.jsxs)("div",{className:"chat-opener-wrapper",children:[Object(l.jsx)(m.Icon,{icon:L.a,className:"chat-opener",onClick:()=>{H(!z),k(!1)},"data-tip":"Chats Panel"}),T?Object(l.jsx)("div",{className:"chat-badge"}):null]})]})]}),Object(l.jsxs)("div",{className:"meet_And_screen_share",children:[Object(l.jsx)("div",{className:"screen-share-box",style:{display:me.enabled?"flex":"none"},children:Object(l.jsx)("video",{ref:F,muted:C.current&&me.presenter===C.current.id,playsInline:!0,id:"share-screen-user",autoPlay:!0})}),Object(l.jsxs)("div",{className:"members-with-config",style:{width:me.enabled?"30%":"100%"},children:[Object(l.jsxs)("div",{className:"members-row",children:[Object(l.jsxs)("div",{className:"user-video-box",style:{display:t?"flex":"none"},children:[Object(l.jsx)(d,{hostRef:v,id:"user-own-video",muted:!0,style:Ne}),Object(l.jsx)("div",{className:"member-name",children:i})]}),t?null:Object(l.jsxs)("div",{className:"camera-off-member",children:[Object(l.jsx)("div",{className:"member-name-initial",children:i.slice(0,1)}),Object(l.jsx)("div",{className:"member-name",children:i})]}),E.current.map((e=>Object(l.jsx)(Oe,{peer:e,style:Ne})))]}),ee?Object(l.jsx)("div",{className:"Transcript-down-position",children:ee}):null,Object(l.jsxs)("div",{className:"meet-options",children:[s?Object(l.jsx)(m.Icon,{icon:b.a,className:"meet-controllers","data-tip":"close mic",onClick:()=>{Be("audio",s,n)}}):Object(l.jsx)(m.Icon,{icon:j.a,className:"meet-controllers","data-tip":"open mic",onClick:()=>{Be("audio",s,n)}}),Object(l.jsx)("div",{className:"disconnect-meet",children:Object(l.jsx)(m.Icon,{className:"meet-controllers",icon:W.a,onClick:()=>{Je(),C.current.emit("disconnectMeet",{name:i,roomID:Ie,userId:g}),Ae(),X([]),ce.current=[],setTimeout((()=>{window.location="/"}),1500)}})}),t?Object(l.jsx)(m.Icon,{icon:O.a,className:"meet-controllers","data-tip":"close camera",onClick:()=>{Be("video",t,c)}}):Object(l.jsx)(m.Icon,{icon:x.a,className:"meet-controllers","data-tip":"open camera",onClick:()=>{Be("video",t,c)}})]})]})]})]}),Object(l.jsx)(de,{chats:G,sendMessage:e=>{const t={name:i,message:e,senderId:C.current.id,userId:g,roomID:Ie};C.current.emit("send message",t),P.current=[...P.current,{name:"You",message:t.message}];const s=P.current;$(s)},openChat:z,setOpenChat:H}),Object(l.jsx)(R.a,{pauseOnFocusLoss:!1}),Object(l.jsx)(se.a,{effect:"solid",place:"bottom"})]})}));s(183);var xe=Object(C.b)((e=>({email:e.userDetails.email,auth:e.userDetails.auth})),(e=>({setEmail:t=>{e({type:"SET_EMAIL",email:t})},setAuth:t=>{e({type:"SET_AUTH",auth:t})}})))((e=>{const{email:t,setEmail:s,setAuth:n}=e,[c,r]=Object(a.useState)(!1),d=Object(o.g)(),[m,u]=Object(a.useState)("");return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"sign-in-parent",children:[Object(l.jsxs)("div",{className:"signin-logo-box",children:[Object(l.jsx)("img",{src:S,className:"logo-signin",alt:"Microsoft Teams"}),Object(l.jsx)("h2",{children:"Microsoft Teams"})]}),Object(l.jsxs)("div",{className:"signin-entry-box",children:[Object(l.jsx)("img",{src:T,className:"avatar-signin",alt:"Avatar"}),Object(l.jsx)("h2",{className:"signin-head",children:"Sign In"}),Object(l.jsx)("input",{type:"email",placeholder:"Enter Email ID",className:"email-input",value:t,onChange:e=>{s(e.target.value)}}),Object(l.jsx)("input",{type:"password",placeholder:"Enter Password",className:"password-input",onChange:e=>{u(e.target.value)}}),c&&Object(l.jsx)(B.a,{type:"BallTriangle",color:"#00BFFF",height:30,width:30}),Object(l.jsxs)("div",{className:"signin-entry-options",children:[Object(l.jsx)("button",{className:"signin-entry-buttons",onClick:()=>{m?t?(r(!0),he()({url:"".concat(pe.a,"/signin"),method:"POST",data:{email:t,password:m},headers:{"Content-Type":"application/json"}}).then((e=>{console.log(e),n(!0),r(!1),R.b.success("Signed in Successfully",{autoClose:2e3,closeOnClick:!1,pauseOnHover:!1}),n(!0),localStorage.setItem("TeamsToken",e.data.token),setTimeout((()=>{d.push("/")}),2e3)})).catch((e=>{R.b.error(e.response.data.error),r(!1)}))):R.b.error("Email can't be empty"):R.b.error("Password can't be empty")},children:"Sign in"}),Object(l.jsx)("button",{className:"signin-entry-buttons",onClick:()=>{d.push("/signup")},children:"Sign Up"})]}),Object(l.jsx)(i.b,{to:"/forgotpassword",className:"forgot-password",children:"Forgot Password?"})]}),Object(l.jsx)("img",{src:k,alt:"group connect",className:"signin-bottom-vector"})]}),Object(l.jsx)(R.a,{})]})})),ve=(s(73),s(43));var fe=Object(C.b)((e=>({email:e.userDetails.email,name:e.userDetails.name})),(e=>({setEmail:t=>{e({type:"SET_EMAIL",email:t})},setName:t=>{e({type:"SET_NAME",name:t})}})))((e=>{const{email:t,setEmail:s,name:n,setName:c}=e,r=Object(o.g)(),[d,m]=Object(a.useState)(!1),[u,j]=Object(a.useState)(""),[p,b]=Object(a.useState)(""),[h,O]=Object(a.useState)(!1),[g,x]=Object(a.useState)(!1),[v,f]=Object(a.useState)(""),[y,I]=Object(a.useState)("");return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"sign-up-parent",children:[Object(l.jsxs)("div",{className:"signup-logo-box",children:[Object(l.jsx)("img",{src:S,className:"logo-signup",alt:"Microsoft Teams"}),Object(l.jsx)("h2",{children:"Microsoft Teams"})]}),Object(l.jsxs)("div",{className:"signup-entry-box",children:[Object(l.jsx)("img",{src:T,className:"avatar-signup",alt:"Avatar"}),Object(l.jsx)("h2",{className:"signup-head",children:"Sign Up"}),!h&&Object(l.jsx)("h4",{children:"OTP Verification"}),!h&&!g&&Object(l.jsx)("input",{type:"email",placeholder:"Enter Email ID",className:"email-input",value:t,onChange:e=>{s(e.target.value)}}),g&&!h&&Object(l.jsxs)("h6",{children:["OTP sent to ",t]}),g&&!h&&Object(l.jsx)("input",{type:"password",placeholder:"Enter OTP",className:"name-input",value:y,onChange:e=>{I(e.target.value)}}),g&&!h&&Object(l.jsx)("h6",{children:"Please check spams, if email not found !"}),h&&Object(l.jsx)("input",{type:"text",placeholder:"Enter Name",className:"name-input",value:n,onChange:e=>{c(e.target.value)}}),h&&Object(l.jsx)("input",{type:"password",placeholder:"Enter Password",className:"password-input",value:u,onChange:e=>{j(e.target.value)}}),h&&Object(l.jsx)("input",{type:"password",placeholder:"Confirm Password",className:"password-input",value:p,onChange:e=>{b(e.target.value)}}),p!==u&&Object(l.jsx)("h5",{style:{color:"red"},children:"*Confirm password does'nt match with password"}),h&&Object(l.jsx)("h6",{className:"signup-password-format",children:"Note: Password must contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"}),d&&Object(l.jsx)(B.a,{type:"BallTriangle",color:"#00BFFF",height:30,width:30}),Object(l.jsxs)("div",{className:"signup-entry-options",children:[!g&&Object(l.jsx)("button",{className:"signup-entry-buttons",onClick:()=>{m(!0),he()({url:"".concat(pe.a,"/verifyotp"),data:{email:t},method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>{e.data.hash?(f(e.data.hash),x(!0),R.b.info("OTP Sent to ".concat(t))):R.b.error(e.data.error),m(!1)}))},children:"Send OTP"}),g&&!h&&Object(l.jsx)("button",{className:"signup-entry-buttons",onClick:()=>{Object(ve.sha256)(y)==v?(R.b.info("OTP Verified Successfully"),O(!0)):R.b.error("Wrong OTP")},children:"Verify OTP"}),h&&Object(l.jsx)("button",{className:"signup-entry-buttons",onClick:()=>{(()=>{if(h){if(!u)return R.b.error("Password can't be empty");if(!t)return R.b.error("Email can't be empty");if(!n)return R.b.error("name can't be empty");if(p!==u)return R.b.error("Confirm password does'nt match with password");if(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t))return R.b.error("Please enter valid email !");if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(u))return R.b.error("Password must contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character !");m(!0),he()({url:"".concat(pe.a,"/signup"),method:"POST",data:{name:n,email:t,password:u},headers:{"Content-Type":"application/json"}}).then((e=>{m(!1),R.b.success("Registered Successfully",{autoClose:2e3,closeOnClick:!1,pauseOnHover:!1}),setTimeout((()=>{r.push("/signin")}),2e3)})).catch((e=>{R.b.error(e.response.data.error),m(!1)}))}})()},children:"Sign Up"})]}),Object(l.jsxs)("h5",{children:["If already have account, ",Object(l.jsx)(i.b,{to:"/signin",children:"Sign In"})]})]}),Object(l.jsx)("img",{src:k,alt:"group connect",className:"signup-bottom-vector"})]}),Object(l.jsx)(R.a,{})]})}));class ye extends n.a.Component{render(){const{component:e,...t}=this.props;return Object(l.jsx)(o.b,{...t,render:t=>this.props.auth?Object(l.jsx)(e,{...t}):Object(l.jsx)(o.a,{to:"/signin"})})}}var Ie=Object(C.b)((e=>({auth:e.userDetails.auth})),void 0)(ye),Ne=(s(185),s(88)),Se=s.n(Ne),Te=s(89),ke=s.n(Te),we=s(90),De=s.n(we),Ce=s(91),Ee=s.n(Ce),Re=s(92),Pe=s.n(Re);var _e=Object(C.b)((e=>({name:e.userDetails.name,socket:e.userDetails.socket,userId:e.userDetails.userId,joiningRoom:e.userDetails.joiningRoom,joiningPath:e.userDetails.joiningPath})),(e=>({setSocket:t=>{e({type:"SET_SOCKET",socket:t})},setName:t=>{e({type:"SET_NAME",name:t})},setUserId:t=>{e({type:"SET_USER_ID",userId:t})},setAuth:t=>{e({type:"SET_AUTH",auth:t})},setJoiningRoom:t=>{e({type:"SET_JOINING_ROOM",joiningRoom:t})},setJoiningPath:t=>{e({type:"SET_JOINING_Path",joiningPath:t})}})))((e=>{const{socket:t,setSocket:s,name:n,setName:c,userId:r,setUserId:i,setAuth:d,joiningRoom:u,setJoiningRoom:j,joiningPath:p,setJoiningPath:b}=e,[h,O]=Object(a.useState)([]),[g,x]=Object(a.useState)(void 0),v=Object(a.useRef)(void 0),f=Object(a.useRef)([]),[y,I]=Object(a.useState)([]),[N,T]=Object(a.useState)(""),[k,w]=Object(a.useState)(""),[D,C]=Object(a.useState)(!1),[P,A]=Object(a.useState)(!1),[M,F]=Object(a.useState)(""),[U,V]=Object(a.useState)(window.screen.width>660),z=Object(a.useRef)(null),L=Object(o.g)(),[H,W]=Object(a.useState)(!1),[G,Z]=Object(a.useState)(!1),$={overlay:{backgroundColor:"rgba(0,0,0,0.7)",zIndex:2},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",padding:"20px"}};Object(a.useEffect)((()=>{if(u&&null!=t&&Y(u),!t){var e=J.a.connect("".concat(pe.a));e.on("connect",(()=>{he()({url:"".concat(pe.a,"/updateSocket"),method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("TeamsToken"))},data:{socketId:e.id}}).then((e=>{})),s(e)}))}he()({url:"".concat(pe.a,"/getChats"),method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("TeamsToken"))}}).then((e=>{console.log(e),c(e.data.user.name),i(e.data.user._id),f.current=f.current.concat(e.data.rooms),O(f.current)}))}),[]),Object(a.useEffect)((()=>{t&&(u&&Y(u),t.on("receivedMessage",(e=>{const{name:t,message:s,userId:a,roomID:n}=e;if(v.current&&v.current.roomID==n){var c=v.current;c.chats=[...c.chats,{name:t,message:s,userId:a}],v.current=c,I(c.chats),x(v.current)}for(var r=0;r<f.current.length;r++)f.current[r].roomID==n&&(f.current[r].chats=[...f.current[r].chats,{name:t,message:s,userId:a}]);O(f.current),X()})))}),[t]);const Y=e=>{if(!e)return R.b.error("Room ID can't be empty!");if(!/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/.test(e))return R.b.error("Incorrect roomID");Z(!0),he()({url:"".concat(pe.a,"/joinRoom"),method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("TeamsToken"))},data:{roomID:e,socketId:t.id}}).then((t=>{Z(!1);const s=[...f.current,t.data];if(f.current=s,O(f.current),C(!1),R.b.info('Joined Room "'.concat(t.data.roomName,'"'),{position:"top-left"}),u&&(j(null),p)){var a=p;b(null,(()=>{L.push("".concat(a,"/").concat(e))}))}})).catch((t=>{if(Z(!1),R.b.error(t.response.data.error),u&&"Room doesn't exist!"!=t.response.data.error&&(j(null),p)){var s=p;b(null,(()=>{L.push("".concat(s,"/").concat(e))}))}}))},q=e=>{var t=e.target.dataset.roomid,s=h.filter((e=>e.roomID==t));I(s[0].chats),x(s[0]),v.current=s[0],z.current&&X(),window.screen.width<=660&&V(!1)},K=e=>{const s={name:n,message:e,userId:r,roomID:g.roomID};t.emit("send message",s);const a=v.current,c=y;c.push({name:n,message:k,userId:r}),a.chats=c;for(var o=0;o<f.current.length;o++)f.current[o].roomID==g.roomID&&(f.current[o].chats=c);v.current=a,I(c),x(v.current),O(f.current),X()};Object(a.useEffect)((()=>{X()}));const X=()=>{z.current&&z.current.scrollIntoView({behavior:"smooth"})};return Object(l.jsxs)("div",{className:"main-component-parent",children:[Object(l.jsxs)(_.a,{isOpen:D,onRequestClose:()=>{C(!1)},style:$,id:"modal-main-component",contentLabel:"Name Modal",children:[Object(l.jsx)("h3",{children:"Join Room"}),Object(l.jsx)("div",{className:"modal-content-home",children:Object(l.jsx)("input",{type:"text",className:"modal-input-main-component",placeholder:"Enter room ID",value:N,onChange:e=>{T(e.target.value)}})}),G&&Object(l.jsx)(B.a,{type:"BallTriangle",color:"#00BFFF",height:30,width:30}),Object(l.jsx)("button",{className:"join-room-main-chat",onClick:()=>{Y(N)},children:"Join room"})]}),Object(l.jsxs)(_.a,{isOpen:P,onRequestClose:()=>{A(!1)},style:$,id:"modal-main-component",contentLabel:"Name Modal",children:[Object(l.jsx)("h3",{children:"Create Room"}),Object(l.jsx)("div",{className:"modal-content-home",children:Object(l.jsx)("input",{type:"text",className:"modal-input-main-component",placeholder:"Enter room name (optional)",value:M,onChange:e=>{F(e.target.value)}})}),G&&Object(l.jsx)(B.a,{type:"BallTriangle",color:"#00BFFF",height:30,width:30}),Object(l.jsx)("button",{className:"join-room-main-chat",onClick:()=>{Z(!0),he()({url:"".concat(pe.a,"/createRoom"),method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("TeamsToken"))},data:{roomID:Object(E.a)(),socketId:t.id,roomName:M||void 0}}).then((e=>{Z(!1);const t=[...f.current,e.data];f.current=t,O(f.current),R.b.info("Created Room ".concat(e.data.roomName),{position:"top-left"}),A(!1)}))},children:"Create room"})]}),Object(l.jsxs)("div",{className:"main-component-header",children:[Object(l.jsxs)("div",{className:"header-logo-box",children:[Object(l.jsx)(m.Icon,{icon:Se.a,style:{fontSize:"40px"},onClick:()=>{V(!U)}}),Object(l.jsx)("img",{src:S,className:"logo-main-component",alt:"Microsoft Teams"}),Object(l.jsx)("h3",{children:"Microsoft Teams"})]}),Object(l.jsxs)("div",{className:"top-header-side-options",children:[Object(l.jsxs)("span",{className:"room-join-options-hover",children:["+",Object(l.jsxs)("ul",{className:"room-join-options",children:[Object(l.jsxs)("li",{onClick:()=>{A(!0)},children:[Object(l.jsx)(m.Icon,{icon:Pe.a}),Object(l.jsx)("span",{children:"Create Room"})]}),Object(l.jsxs)("li",{onClick:()=>{C(!0)},children:[Object(l.jsx)(m.Icon,{icon:Ee.a}),Object(l.jsx)("span",{children:"Join Room"})]})]})]}),Object(l.jsx)(m.Icon,{"data-tip":"Sign Out",onClick:()=>{d(!1),localStorage.removeItem("TeamsToken"),L.push("/signin")},icon:De.a})]})]}),Object(l.jsxs)("div",{className:"main-component-content",children:[Object(l.jsxs)(le.a,{collapsed:!U,collapsedWidth:"0px",className:"main-chat-pro-sidebar",children:[Object(l.jsx)(le.d,{className:"main-chat-pro-header",children:Object(l.jsx)("h4",{children:"Rooms"})}),Object(l.jsx)(le.b,{className:"main-chat-pro-content",children:h.map((e=>Object(l.jsxs)("div",{className:"sidebar-room","data-roomid":e.roomID,id:g&&g.roomID==e.roomID?"selectedRoom":"null",onClick:e=>{q(e)},children:[Object(l.jsx)("div",{className:"room-initial","data-roomid":e.roomID,onClick:e=>{q(e)},children:e.roomName.slice(0,1).toUpperCase()}),Object(l.jsx)("div",{className:"room-name","data-roomid":e.roomID,onClick:e=>{q(e)},children:e.roomName})]})))})]}),g?Object(l.jsxs)(le.a,{collapsed:!1,collapsedWidth:"0px",className:"main-chat-chats-box",children:[Object(l.jsxs)(le.d,{className:"main-chat-chats-box-header",children:[Object(l.jsxs)("div",{className:"room-detail",children:[Object(l.jsx)("div",{className:"room-initial-chat-box-header",children:g.roomName.slice(0,1).toUpperCase()}),Object(l.jsxs)("div",{className:"room-name",children:[Object(l.jsx)("h4",{children:g.roomName}),Object(l.jsxs)("h5",{children:["Room id : ",g.roomID]})]})]}),Object(l.jsxs)("div",{className:"room-options-chat",children:[Object(l.jsx)(te.a,{className:"background-switcher-chat",uncheckedIcon:!1,checkedIcon:!1,height:20,width:40,"data-tip":"Change Wallpaper",onChange:e=>{W(e),document.getElementsByClassName("main-chat-chats-box-content")[0].style.backgroundImage=e?'url("https://picsum.photos/1920/1080")':null},checked:H}),Object(l.jsxs)("div",{className:"join-meet-outer-box","data-tip":"Join Meeting",children:[Object(l.jsx)("div",{className:"join-meet-outer","data-tip":"Join Meeting","data-roomid":g.roomID,onClick:e=>{L.push("/home/".concat(e.target.dataset.roomid))}}),Object(l.jsx)(m.Icon,{icon:ke.a,className:"join-meet-main-chat","data-tip":"Join Meeting"})]})]})]}),Object(l.jsxs)(le.b,{className:"main-chat-chats-box-content",children:[y.map((e=>Object(l.jsxs)("div",{className:"sidebar-room-chat",id:e.userId==r?"shiftChat":null,children:[Object(l.jsx)("div",{className:"room-initial-chat",style:{backgroundColor:"#333"},children:e.name.slice(0,1).toUpperCase()}),Object(l.jsxs)("div",{className:"chat-user",children:[Object(l.jsx)("h4",{className:"chat-user-name",children:e.userId==r?"You":e.name}),Object(l.jsx)("div",{className:"chat-user-message",children:e.message})]})]}))),Object(l.jsx)("div",{ref:z})]}),Object(l.jsxs)(le.c,{className:"main-chat-chats-box-footer",children:[Object(l.jsx)("input",{type:"text",placeholder:"Type here",className:"chat-entry",onKeyPress:e=>{"Enter"==(e=e||window.event).key&&(K(k),w(""))},onChange:e=>{w(e.target.value)},value:k}),Object(l.jsx)(m.Icon,{icon:re.a,style:{color:"#333"},onClick:()=>{K(k),w("")}})]})]}):Object(l.jsxs)("div",{className:"no-room-selected",children:[Object(l.jsx)("h1",{children:"Select Your Room !"}),Object(l.jsx)("h3",{children:"OR"}),Object(l.jsx)("h5",{children:'Join or Create Room by clicking on "+"'})]})]}),Object(l.jsx)(R.a,{}),Object(l.jsx)(se.a,{effect:"solid",place:"bottom"})]})}));var Ae=Object(C.b)(null,null)((e=>{const[t,s]=Object(a.useState)(""),n=Object(o.g)(),[c,r]=Object(a.useState)(!1),[d,m]=Object(a.useState)(""),[u,j]=Object(a.useState)(""),[p,b]=Object(a.useState)(!1),[h,O]=Object(a.useState)(!1),[g,x]=Object(a.useState)(""),[v,f]=Object(a.useState)("");return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"sign-up-parent",children:[Object(l.jsxs)("div",{className:"signup-logo-box",children:[Object(l.jsx)("img",{src:S,className:"logo-signup",alt:"Microsoft Teams"}),Object(l.jsx)("h2",{children:"Microsoft Teams"})]}),Object(l.jsxs)("div",{className:"signup-entry-box",children:[Object(l.jsx)("img",{src:T,className:"avatar-signup",alt:"Avatar"}),Object(l.jsx)("h2",{className:"signup-head",children:"Forgot Password"}),!p&&Object(l.jsx)("h4",{children:"OTP Verification"}),!p&&!h&&Object(l.jsx)("input",{type:"email",placeholder:"Enter Email ID",className:"email-input",value:t,onChange:e=>{s(e.target.value)}}),h&&!p&&Object(l.jsxs)("h6",{children:["OTP sent to ",t]}),h&&!p&&Object(l.jsx)("input",{type:"password",placeholder:"Enter OTP",className:"name-input",value:v,onChange:e=>{f(e.target.value)}}),h&&!p&&Object(l.jsx)("h6",{children:"Please check spams, if email not found !"}),p&&Object(l.jsx)("input",{type:"password",placeholder:"Enter Password",className:"password-input",value:d,onChange:e=>{m(e.target.value)}}),p&&Object(l.jsx)("input",{type:"password",placeholder:"Confirm Password",className:"password-input",value:u,onChange:e=>{j(e.target.value)}}),u!==d&&Object(l.jsx)("h5",{style:{color:"red"},children:"*Confirm password does'nt match with password"}),p&&Object(l.jsx)("h6",{className:"signup-password-format",children:"Note: Password must contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"}),c&&Object(l.jsx)(B.a,{type:"BallTriangle",color:"#00BFFF",height:30,width:30}),Object(l.jsxs)("div",{className:"signup-entry-options",children:[!h&&Object(l.jsx)("button",{className:"signup-entry-buttons",onClick:()=>{r(!0),he()({url:"".concat(pe.a,"/verifyotp"),data:{email:t},method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>{e.data.hash?(x(e.data.hash),O(!0),R.b.info("OTP Sent to ".concat(t))):R.b.error(e.data.error),r(!1)}))},children:"Send OTP"}),h&&!p&&Object(l.jsx)("button",{className:"signup-entry-buttons",onClick:()=>{Object(ve.sha256)(v)==g?(R.b.info("OTP Verified Successfully"),b(!0)):R.b.error("Wrong OTP")},children:"Verify OTP"}),p&&Object(l.jsx)("button",{className:"signup-entry-buttons",onClick:()=>{(()=>{if(p){if(!d)return R.b.error("Password can't be empty");if(!t)return R.b.error("Email can't be empty");if(u!==d)return R.b.error("Confirm password does'nt match with password");if(!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t))return R.b.error("Please enter valid email !");if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(d))return R.b.error("Password must contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character !");r(!0),he()({url:"".concat(pe.a,"/forgotpassword"),method:"POST",data:{email:t,password:d},headers:{"Content-Type":"application/json"}}).then((e=>{r(!1),R.b.success("Password Updated Successfully",{autoClose:2e3,closeOnClick:!1,pauseOnHover:!1}),setTimeout((()=>{n.push("/signin")}),2e3)})).catch((e=>{R.b.error(e.response.data.error),r(!1)}))}})()},children:"Submit"})]}),Object(l.jsxs)("h5",{children:["If already have account, ",Object(l.jsx)(i.b,{to:"/signin",children:"Sign In"})]})]}),Object(l.jsx)("img",{src:k,alt:"group connect",className:"signup-bottom-vector"})]}),Object(l.jsx)(R.a,{})]})}));const Me=e=>{const t=Object(o.g)(),{auth:s,setJoiningRoom:n,setJoiningPath:c}=e;return Object(a.useEffect)((()=>{const e=window.location.href.split("/");var a=/[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}/;if(a.test(e[e.length-1])){n(e[e.length-1]);e.find((e=>"home"===e||"teams"===e))&&c("home"),t.push("/")}else if(a.test(e[e.length-2])){n(e[e.length-2]);const s=e.find((e=>"home"===e||"teams"===e));s&&c(s),t.push("/")}s||t.push("/signin")}),[]),Object(l.jsx)(l.Fragment,{children:s?Object(l.jsxs)(o.d,{children:[Object(l.jsx)(o.b,{exact:!0,path:"/teams/:teamId",component:ge}),Object(l.jsx)(o.b,{exact:!0,path:"/home/:teamId",component:F}),Object(l.jsx)(Ie,{component:_e})]}):Object(l.jsxs)(o.d,{children:[Object(l.jsx)(o.b,{exact:!0,path:"/signup",component:fe}),Object(l.jsx)(o.b,{path:"/signin",component:xe}),Object(l.jsx)(o.b,{path:"/forgotpassword",component:Ae})]})})};var Be=Object(C.b)((e=>({auth:e.userDetails.auth})),(e=>({setJoiningRoom:t=>{e({type:"SET_JOINING_ROOM",joiningRoom:t})},setJoiningPath:t=>{e({type:"SET_JOINING_PATH",joiningPath:t})}})))((function(e){const[t,s]=Object(a.useState)(!0),{auth:n,setJoiningRoom:c,setJoiningPath:r}=e;return Object(a.useEffect)((()=>{fetch(pe.a).then((e=>{console.log(e),s(!1)})).catch((e=>{console.log(e)}))}),[]),Object(l.jsx)(i.a,{children:t?Object(l.jsxs)("div",{class:"center",children:[Object(l.jsx)("div",{class:"wave"}),Object(l.jsx)("div",{class:"wave"}),Object(l.jsx)("div",{class:"wave"}),Object(l.jsx)("div",{class:"wave"}),Object(l.jsx)("div",{class:"wave"}),Object(l.jsx)("div",{class:"wave"}),Object(l.jsx)("div",{class:"wave"}),Object(l.jsx)("div",{class:"wave"}),Object(l.jsx)("div",{class:"wave"}),Object(l.jsx)("div",{class:"wave"})]}):Object(l.jsx)(Me,{auth:n,setJoiningRoom:c,setJoiningPath:r})})}));var Fe=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,190)).then((t=>{let{getCLS:s,getFID:a,getFCP:n,getLCP:c,getTTFB:r}=t;s(e),a(e),n(e),c(e),r(e)}))},Je=s(45),Ue={userId:null,name:"",email:"",mic:!1,camera:!1,stream:null,videoDevices:[],audioDevices:[],auth:!1,socket:null,joiningRoom:null,joiningPath:null};const Ve=Object(Je.a)({userDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;return"SET_USER_ID"===t.type?{...e,userId:t.userId}:"SET_SOCKET"===t.type?{...e,socket:t.socket}:"SET_AUTH"===t.type?{...e,auth:t.auth}:"SET_NAME"===t.type?{...e,name:t.name}:"SET_EMAIL"===t.type?{...e,email:t.email}:"SET_MIC"===t.type?{...e,mic:t.mic}:"SET_CAMERA"===t.type?{...e,camera:t.camera}:"SET_STREAM"===t.type?{...e,stream:t.stream}:"SET_VIDEO_DEVICES"===t.type?{...e,videoDevices:t.videoDevices}:"SET_AUDIO_DEVICES"===t.type?{...e,audioDevices:t.audioDevices}:"SET_JOINING_ROOM"===t.type?{...e,joiningRoom:t.joiningRoom}:"SET_JOINING_PATH"===t.type?{...e,joiningPath:t.joiningPath}:e}});var ze=Ve;const Le=Object(Je.b)(ze,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());localStorage.getItem("TeamsToken")?Le.dispatch({type:"SET_AUTH",auth:!0}):Le.dispatch({type:"SET_AUTH",auth:!1}),r.a.render(Object(l.jsx)(C.a,{store:Le,children:Object(l.jsx)(Be,{})}),document.getElementById("root")),Fe()},7:function(e){e.exports=JSON.parse('{"a":""}')},73:function(e,t,s){},98:function(e,t,s){},99:function(e,t,s){}},[[186,1,2]]]);
//# sourceMappingURL=main.05430487.chunk.js.map